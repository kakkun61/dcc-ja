# S-9.2.2 Configuration Variables For Digital Command Control

[Original](https://www.nmra.org/sites/default/files/standards/sandrp/pdf/s-9.2.2_decoder_cvs_2012.07.pdf)

Original Version: July 2012

This Standard provides a map and descriptions for _Digital Decoder_ Configuration Variables. Configuration Variables allow the decoder to be customized for each locomotive, or other mobile or stationary devices. Unless otherwise specified, configuration Variables shall be stored in non-volatile memory and must not change when power is removed from the decoder over long extended periods of time.

## General Definitions

Tables 1 and 2 identify each of the Configuration Variables (CVs), along with additional information about each one. Following Table 1 is a written description of each of the CVs. In Tables 1 and 2 each Configuration Variable (CV) is identified by name and number, along with the following information:

- Required: Mandatory (M), Recommended (R) or Optional (O). CVs identified as Mandatory (M) must be implemented in order to conform to this Standard, while those marked as Recommended (R) are strongly encouraged but not mandatory, and those marked Optional (O) are at the manufacturer’s discretion.
- Default Value: the required factory default value when the CV is provided in an implementation.
- Read-Only: indicates a CV whose value should be set by the manufacturer and which the user cannot modify.
- Uniform Spec: Many CVs are implementation specific and no uniform specification is required. Others must be implemented in a uniform fashion in order to achieve compatibility. A “Y” in the Uniform Spec column indicates a CV which requires implementation by manufacturers according to a common specification. A blank in the Uniform Specification means that the CV must be used for its designated purpose, but the action taken by the decoder for a specific value can vary from manufacturer to manufacturer.
- Dynamic: CVs in this range are dynamic and are used for Unsolicited Decoder Initiated Transmission. Manufacturers who utilize these CVs are requested to contact the NMRA DCC WG for current uniform specifications.
- Additional Comments: CVs identified as “Reserved by NMRA for future use” are allocated for future needs and must not be used by an implementer without prior written approval from the NMRA Technical Department. CVs identified as “Values assigned by NMRA” indicate that the allowable values are defined by the NMRA and any requests for additional values should be directed to the NMRA Technical Department. CVs identified as “Reserved for manufacturer use” are allocated for use by implementers, for which no prior NMRA authorization is needed, and for which no common usage across decoders from different implementers can be assured by the NMRA.

Note. While all Digital Decoders need not implement all variables, it is required that if a function is provided, that the all of the relevant CV information be adhered to.

CV Name                                                | CV #  | Required | Default Value | Read Only | Uniform Spec | Dynamic (Volatile) | Additional Comments
-------------------------------------------------------|:-----:|:--------:|:-------------:|:---------:|:------------:|:------------------:|--------------------
Primary Address                                        |   1   |    M     |       3       |           |       Y      |                    |
V<sub>Start</sub>                                      |   2   |    R     |               |           |              |                    |
Acceleration Rate                                      |   3   |    R     |               |           |              |                    |
Deceleration Rate                                      |   4   |    R     |               |           |              |                    |
V<sub>Hight</sub>                                      |   5   |    O     |               |           |              |                    |
V<sub>Mid</sub>                                        |   6   |    O     |               |           |              |                    |
Manufacturer Version No.                               |   7   |    M     |               |     Y     |              |                    | Manufacturer defined version info
Manufactured ID                                        |   8   |    M     |               |     Y     |       Y      |                    | Values assigned by NMRA
Total PWS Period                                       |   9   |    O     |               |           |              |                    |
EMF Feedback Cutout                                    |  10   |    O     |               |           |              |                    |
Packet Time-Out Value                                  |  11   |    R     |               |           |              |                    |
Power Source Conversion                                |  12   |    O     |               |           |       Y      |                    | Values assigned by NMRA
Alternative Mode Function Status F1-F8                 |  13   |    O     |               |           |       Y      |                    |
Alternative Mode Function Status FL, F9-F12            |  14   |    O     |               |           |       Y      |                    |
Decoder Lock                                           | 15-16 |    O     |               |           |       Y      |                    |
Extended Address                                       | 17+18 |    O     |               |           |       Y      |                    |
Consist Address                                        |  19   |    O     |               |           |       Y      |                    |
                                                       |  20   |          |               |           |              |                    | Reserved by NMRA for future use
Consist Address Active for F1-F8                       |  21   |    O     |               |           |       Y      |                    |
Consist Address Active for FL, F9-F12                  |  22   |    O     |               |           |       Y      |                    |
Acceleration Adjustment                                |  23   |    O     |               |           |       Y      |                    |
Deceleration Adjustment                                |  24   |    O     |               |           |       Y      |                    |
Speed Table / Mid-range Cab Speed Step                 |  25   |    O     |               |           |       Y      |                    |
                                                       |  26   |          |               |           |              |                    | Reserved by NMRA for future use
Decoder Automatic Stopping Configuration               |  27   |    O     |               |           |       Y      |                    | Under re-evaluation — see details
Bi-Directional Communication Configuration             |  28   |    O     |               |           |       Y      |                    | Under re-evaluation — see details
Configuration Data #1                                  |  29   |  M<sub>1</sub> |         |           |       Y      |                    |
Error Information                                      |  30   |    O     |               |           |       Y      |                    |
Index High Byte                                        |  31   |    O     |               |           |       Y      |                    | Primary index for CV 257-512<br>00000000-00001111 Reserved by NMRA for future use
Index Low Byte                                         |  32   |    O     |               |           |       Y      |                    | Secondary index for CV 257-512
Output Location FL (f), FL (r), F1-F12                 | 33-46 |    O     |               |           |       Y      |                    |
_WIP_                                                  |       |          |               |           |              |                    |

Binary numerical quantities are stored such that the rightmost bit is the least significant, and the leftmost is the most significant.

### Descriptions of Configuration Variables for Multi-Function Decoders

#### Configuration Variable 1: Primary Address

Bits 0-6 contain an address with a value between 1 and 127. Bit seven must have a value of `0`. If the value of Configuration Variable 1 is `00000000` then the decoder will go out of NMRA digital mode and convert to the alternate power source as defined by Configuration Variable 12. This setting will not affect the Digital
Decoder's ability to respond to service mode packets (see S 9.2.3). The default value for this Configuration Variable is 3, if the decoder is not installed in a locomotive or other unit when shipped from the manufacturer.

#### Configuration Variable 2: V<sub>Start</sub>

V<sub>Start</sub> is used to define the voltage drive level used as the start voltage on the motor. The voltage drive levels shall correspond linearly to the voltage applied to the motor at speed step one, as a fraction of available rectified supply voltage. When the voltage drive level is equal to zero, there shall be zero voltage applied to the motor. When it is at maximum `11111111`, the full available rectified voltage shall be applied.

#### Configuration Variable 3: Acceleration Rate

Determines the decoder's acceleration rate. The formula for the acceleration rate shall be equal to `(the contents of CV 3) × 0.896 / (number of speed steps in use)`. For example, if the contents of CV 3 = 2, then the acceleration is 0.064 sec/step for a decoder currently using 28 speed steps. If the content of this parameter equals 0 then there is no programmed momentum during acceleration.

#### Configuration Variable 4: Deceleration Rate

Determines a decoders braking rate, in the same fashion as acceleration above (CV #3).

#### Configuration Variable 5: V<sub>High</sub>

V<sub>high</sub> is used to specify the motor voltage drive levels at the maximum speed step. This value shall be specified as a fraction of available rectified supply voltage. When the contents of CV #5 equal "11111111", the full available rectified voltage shall be applied. Values of "00000000" or "00000001" shall indicate that V<sub>high</sub> is not used in the calculation of the speed table.

#### Configuration Variable 6: V<sub>Mid</sub>

V<sub>mid</sub> specifies the voltage drive level at the middle speed step. V<sub>mid</sub> is used to generate a performance curve in the decoder that translate speed step values into motor voltage drive levels and is specified as a fraction of available rectified supply voltage. Values of 00000000 or 00000001 shall indicate that V<sub>mid</sub> is not used in the calculation of the speed table.

#### Configuration Variable 7: 製造者バージョン番号

This is reserved for the manufacturer to store information regarding the version of the decoder.

#### Configuration Variable 8: 製造者 ID

CV8 shall contain the NMRA assigned id number of the manufacturer of this decoder. The currently assigned manufacturer ID codes are listed in Appendix A of this Standard. The use of a value not assigned by the NMRA shall immediately cause the decoder to not be in conformance to this Standard. The CV shall be implemented as a read-only value, which cannot be modified.

#### Configuration Variable 9: PWM 全期間

The value of CV #9 sets the nominal PWM period at the decoder output and therefore the frequency is proportional to the reciprocal of the value. The recommend formula for PWM period should be: PWM period (uS) = (131 + MANTISSA x 4)x 2 EXP ,Where MANTISSA is in bits 0-4 bits of CV #9 (low order) and EXP is bits 5-7 for CV #9. If the value programmed into CV-9 falls outside a decoder's capability, it is suggested (but not required) that the decoder "adjust" the value to the appropriate highest or lowest setting supported by the decoder.

#### Configuration Variable 10: EMF フィードバックカットアウト

Contains a value between 1 and 128 that indicates the speed step above which the back EMF motor control cuts off. When 14 or 28 speed steps are used the LSB's of the value are truncated appropriately.

#### Configuration Variable 11: パケットタイムアウト値

Contains the maximum time period that the decoder will maintain its speed without receiving a valid packet. See S 9.2.4 Section C for further information.

_WIP_

[^1]: If any of these features are provided, then this CV is Mandatory
